<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Brainhair - AI API Gateway</title>
    <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body>
    <div class="card">
        <div class="card__header">
            <h1 class="card__title">Brainhair - AI Tech Assistant</h1>
        </div>
        <div class="card__body">
            <p>Chat with Claude AI to help solve tickets, search knowledge, and manage devices.</p>
            <a href="chat" class="btn btn--primary">
                <span class="btn__label">
                    <i data-lucide="message-square" class="btn__icon"></i>
                    Open Chat Interface
                </span>
            </a>
        </div>
    </div>

    <script>
        // Initialize Lucide icons
        lucide.createIcons();
    </script>

    <div class="card">
        <div class="card__header">
            <h2 class="card__title">Available Endpoints</h2>
        </div>
        <div class="card__body">

            <h3>KnowledgeTree Integration</h3>
            <ul>
                <li><code>GET /api/knowledge/search?q=query</code> - Search knowledge base</li>
                <li><code>GET /api/knowledge/browse?path=path</code> - Browse knowledge tree</li>
                <li><code>GET /api/knowledge/node/&lt;id&gt;</code> - Get node details</li>
            </ul>

            <h3>Codex Integration</h3>
            <ul>
                <li><code>GET /api/codex/companies</code> - List companies</li>
                <li><code>GET /api/codex/company/&lt;id&gt;</code> - Get company details</li>
                <li><code>GET /api/codex/tickets</code> - List tickets</li>
            </ul>

            <h3>FreshService Integration</h3>
            <ul>
                <li><code>GET /api/freshservice/tickets</code> - List FreshService tickets</li>
                <li><code>GET /api/freshservice/ticket/&lt;id&gt;</code> - Get ticket details</li>
            </ul>

            <h3>Datto Integration</h3>
            <ul>
                <li><code>GET /api/datto/devices</code> - List Datto devices</li>
                <li><code>GET /api/datto/device/&lt;id&gt;</code> - Get device details</li>
            </ul>

            <h3>Utility</h3>
            <ul>
                <li><code>GET /api/health</code> - Health check</li>
                <li><code>GET /api/endpoints</code> - List all endpoints (JSON)</li>
            </ul>

        </div>
    </div>

    <div class="card">
        <div class="card__header">
            <h2 class="card__title">Data Filtering</h2>
        </div>
        <div class="card__body">
            <p>All endpoints support automatic PHI/CJIS filtering via Presidio:</p>
            <ul>
                <li>Add <code>?filter=phi</code> for PHI filtering (default)</li>
                <li>Add <code>?filter=cjis</code> for CJIS filtering</li>
            </ul>
        </div>
    </div>

    <div class="card">
        <div class="card__header">
            <h2 class="card__title">Authentication</h2>
        </div>
        <div class="card__body">
            <p>All endpoints require Bearer token authentication.</p>
            <p>Your permission level: <strong>{{ user.permission_level }}</strong></p>
        </div>
    </div>
</body>
</html>
